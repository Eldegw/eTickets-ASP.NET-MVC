@model Actor

@{
    ViewData["Title"] = "Edit Actor Profile";
}

<style>
    /* التنسيق العام */
    body {
        background-color: #0b0c10;
        color: #ffffff;
        font-family: 'Poppins', sans-serif;
    }

    .edit-container {
        margin-top: 50px;
        margin-bottom: 50px;
    }

    /* الكارت الزجاجي */
    .glass-form {
        background: rgba(31, 40, 51, 0.4);
        backdrop-filter: blur(20px);
        border-radius: 35px;
        border: 1px solid rgba(102, 252, 241, 0.2);
        padding: 45px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    }

    /* تنسيق معاينة الصورة */
    .img-preview-wrapper {
        position: relative;
        display: inline-block;
        margin-bottom: 30px;
    }

    .img-preview {
        width: 180px;
        height: 180px;
        object-fit: cover;
        border-radius: 50%;
        border: 4px solid #66fcf1;
        box-shadow: 0 0 25px rgba(102, 252, 241, 0.3);
        transition: 0.3s ease-in-out;
    }

    /* تنسيق حقول الإدخال */
    .form-label {
        color: #66fcf1;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.9rem;
        letter-spacing: 1px;
    }

    .form-control {
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(102, 252, 241, 0.3);
        color: white;
        border-radius: 12px;
        padding: 12px 15px;
        transition: 0.3s;
    }

        .form-control:focus {
            background: rgba(0, 0, 0, 0.4);
            border-color: #66fcf1;
            box-shadow: 0 0 12px rgba(102, 252, 241, 0.2);
            color: white;
        }

    /* الأزرار */
    .btn-update {
        background: #66fcf1;
        color: #0b0c10;
        font-weight: 800;
        border-radius: 50px;
        padding: 12px 40px;
        border: none;
        transition: 0.4s;
        text-transform: uppercase;
    }

        .btn-update:hover {
            background: #45a29e;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 252, 241, 0.3);
        }

    .btn-cancel {
        border-radius: 50px;
        padding: 12px 30px;
        color: #fff;
        border: 1px solid rgba(255,255,255,0.2);
    }

        .btn-cancel:hover {
            background: rgba(255,255,255,0.05);
            color: #fff;
        }

    .text-danger {
        font-size: 0.85rem;
        margin-top: 5px;
    }
</style>

<div class="container edit-container">
    <div class="row justify-content-center">
        <div class="col-xl-7 col-lg-9">
            <div class="glass-form">
                <div class="text-center mb-5">
                    <h2 class="fw-bold text-white">Update <span style="color:#66fcf1">Actor</span> Profile</h2>
                    <p class="text-white-50">Modify the information and save changes</p>
                </div>

                <form asp-controller="Actors" asp-action="SaveEdit" method="post">
                    <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                    @* حقل الـ ID مخفي حتى يتم التعديل على نفس العنصر *@
                    <input type="hidden" asp-for="Id" />

                    <div class="text-center">
                        <div class="img-preview-wrapper">
                            <img id="ProfilePicturePreview" src="@Model.ProfilePictureURL" class="img-preview" alt="Preview">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 mb-4">
                            <label asp-for="ProfilePictureURL" class="form-label text-uppercase">Profile Picture URL</label>
                            <input asp-for="ProfilePictureURL" class="form-control" id="ImageUrlInput" placeholder="Paste image link here..." />
                            <span asp-validation-for="ProfilePictureURL" class="text-danger"></span>
                        </div>

                        <div class="col-12 mb-4">
                            <label asp-for="FullName" class="form-label text-uppercase">Actor Full Name</label>
                            <input asp-for="FullName" class="form-control" placeholder="Enter full name" />
                            <span asp-validation-for="FullName" class="text-danger"></span>
                        </div>

                        <div class="col-12 mb-5">
                            <label asp-for="Bio" class="form-label text-uppercase">Biography</label>
                            <textarea asp-for="Bio" class="form-control" rows="5" placeholder="Write actor bio here..."></textarea>
                            <span asp-validation-for="Bio" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-sm-row gap-3">
                        <button type="submit" class="btn btn-update flex-grow-1">
                            <i class="bi bi-cloud-arrow-up-fill me-2"></i> Save Changes
                        </button>
                        <a asp-action="Index" class="btn btn-cancel">
                            Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // تحديث الصورة "لايف" بمجرد الكتابة أو تغيير الرابط
            $("#ImageUrlInput").on("input change", function () {
                var output = document.getElementById('ProfilePicturePreview');
                var url = $(this).val();

                // إذا كان الرابط فارغاً نضع صورة افتراضية أو نتركها
                if(url) {
                    output.src = url;
                }
            });
        });
    </script>

    @* تفعيل الـ Validation من جهة العميل *@
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}